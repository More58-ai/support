<!DOCTYPE html>

<html lang="uk">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>SUPPORT</title>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>

        :root { --blue: #0057b7; --yellow: #ffd700; --radius: 30px; --bg: #05111d; }

        body { font-family: 'Montserrat', sans-serif; background: var(--bg); color: white; margin: 0; overflow: hidden; height: 100vh; }

        #particles-js { position: fixed; inset: 0; z-index: -1; }



        /* –ì—ñ—Ä–ª—è–Ω–¥–∞ */

        .garland { position: fixed; top: 0; left: 0; width: 100%; height: 20px; z-index: 10001; display: flex; justify-content: space-around; pointer-events: none; }

        .light { width: 10px; height: 18px; border-radius: 50%; animation: flash 1.5s infinite; }

        @keyframes flash {

            0%, 100% { opacity: 0.3; transform: scale(0.8); }

            50% { opacity: 1; transform: scale(1.1); box-shadow: 0 0 15px currentColor; }

        }



        /* RGB –¢–µ–∫—Å—Ç —Ç–∞ –Ø–ª–∏–Ω–∫–∞ */

        @keyframes rgb-text {

            0% { color: #ff0000; text-shadow: 0 0 10px #ff0000; }

            33% { color: #00ff00; text-shadow: 0 0 10px #00ff00; }

            66% { color: #0000ff; text-shadow: 0 0 10px #0000ff; }

            100% { color: #ff0000; text-shadow: 0 0 10px #ff0000; }

        }

        .logo-text { font-weight: 900; letter-spacing: 5px; animation: rgb-text 5s infinite; text-transform: uppercase; text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 25px; }



        .sidebar { width: 280px; height: 100vh; position: fixed; background: rgba(10,26,42,0.95); padding: 25px; backdrop-filter: blur(15px); border-right: 1px solid rgba(255,255,255,0.1); z-index: 1000; display: flex; flex-direction: column; }

        .main { margin-left: 300px; padding: 40px; height: 100vh; overflow-y: auto; box-sizing: border-box; }



        /* –ö–Ω–æ–ø–∫–∏ */

        .btn { width: 100%; padding: 14px; margin-bottom: 10px; border-radius: 18px; border: none; background: var(--blue); color: white; font-weight: 700; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; text-decoration: none; box-sizing: border-box; font-size: 13px; }

        .btn:hover { transform: translateY(-2px); filter: brightness(1.2); }

        .btn-rgb { animation: rgb-bg 6s linear infinite; color: #fff !important; border: 1px solid rgba(255,255,255,0.2); }

        @keyframes rgb-bg {

            0% { background: #ff0000; } 33% { background: #00ff00; } 66% { background: #0000ff; } 100% { background: #ff0000; }

        }



        /* –ü–ª–µ—î—Ä */

        #music-list { max-height: 180px; overflow-y: auto; background: rgba(0,0,0,0.2); border-radius: 15px; padding: 5px; margin: 10px 0; border: 1px solid rgba(255,255,255,0.05); }

        .track-item { font-size: 11px; padding: 10px; cursor: pointer; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 2px; transition: 0.2s; }

        .track-item:hover { background: rgba(255,255,255,0.1); }

        .track-item span { flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        .del-btn { color: #ff4444; opacity: 0.5; font-size: 16px; padding-left: 10px; transition: 0.3s; cursor: pointer; }

        .del-btn:hover { opacity: 1; transform: scale(1.2); }



        .controls-panel { background: rgba(255,255,255,0.07); padding: 15px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); display: none; opacity: 0; transition: opacity 0.4s; }

        .progress-container { width: 100%; height: 5px; background: #222; border-radius: 10px; cursor: pointer; margin: 10px 0; }

        #progress-bar { height: 100%; background: #fff; width: 0%; border-radius: 10px; box-shadow: 0 0 10px #fff; }



        /* –°—Ç–∞—Ç—É—Å–∏ */

        .tag { font-size: 10px; padding: 4px 10px; border-radius: 10px; font-weight: 900; animation: shine 3s linear infinite; background-size: 200% auto; color: white; margin-top: 5px; display: inline-block; }

        .tag-work { background-image: linear-gradient(90deg, #00c6ff, #0072ff, #00c6ff); }

        .tag-rest { background-image: linear-gradient(90deg, #f09819, #edde5d, #f09819); }

        .online-dot { width: 9px; height: 9px; background: #22c55e; border-radius: 50%; display: inline-block; margin-left: 7px; box-shadow: 0 0 8px #22c55e; }



        /* –ú–æ–¥–∞–ª–∫–∏ */

        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 5000; align-items: center; justify-content: center; padding: 20px; }

        .modal-content { background: #0a1a2a; width: 100%; max-width: 900px; height: 80vh; border-radius: var(--radius); border: 2px solid #fff; position: relative; overflow: hidden; }



        #auth-screen { position: fixed; inset: 0; background: var(--bg); z-index: 10000; display: flex; align-items: center; justify-content: center; }

        .auth-box { background: #0a1a2a; padding: 40px; border-radius: var(--radius); border: 2px solid #fff; width: 340px; text-align: center; }

        input { width: 100%; padding: 14px; margin-bottom: 15px; border-radius: 15px; border: 1px solid #333; background: #000; color: white; box-sizing: border-box; outline: none; }

        

        .staff-card { background: rgba(255,255,255,0.03); padding: 15px; border-radius: 20px; display: flex; align-items: center; gap: 15px; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; }

        .staff-card:hover { background: rgba(255,255,255,0.06); }



        .snowflake { position: fixed; top: -10px; color: white; pointer-events: none; z-index: 9999; animation: fall linear infinite; opacity: 0.5; }

        @keyframes fall { to { transform: translateY(105vh) rotate(360deg); } }

        @keyframes shine { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

    </style>

</head>

<body>



<div id="particles-js"></div>

<div class="garland" id="garland"></div>

<audio id="player-audio"></audio>



<div id="auth-screen" style="display:none;">

    <div class="auth-box">

        <h1 class="logo-text">üéÑ SUPPORT üéÑ</h1>

        <input type="text" id="log-nick" placeholder="–ù—ñ–∫–Ω–µ–π–º Discord">

        <input type="password" id="log-pass" placeholder="–ü–∞—Ä–æ–ª—å">

        <button class="btn" onclick="handleAuth()">–£–í–Ü–ô–¢–ò / –†–ï–Ñ–°–¢–†–ê–¶–Ü–Ø</button>

        <p id="auth-err" style="color:#ff4444; font-size:12px; margin-top:10px;"></p>

    </div>

</div>



<aside class="sidebar">

    <h2 class="logo-text" style="font-size: 20px;">üéÑ SUPPORT</h2>

    <a href="https://discord.com/channels/1407650288869048430/1436079913559130112" target="_blank" class="btn btn-rgb">

        <i class="fas fa-handshake"></i> –ü–û–ß–ê–¢–ò –î–û–ü–û–ú–ê–ì–ê–¢–ò

    </a>

    <button class="btn" onclick="openM('m-rep')"><i class="fas fa-file-alt"></i> –ó–í–Ü–¢–ù–Ü–°–¢–¨</button>

    <button class="btn" onclick="openM('m-norm')"><i class="fas fa-list-ol"></i> –ù–û–†–ú–ê</button>

    

    <div style="display:flex; justify-content:space-between; align-items:center; margin: 25px 0 10px; opacity: 0.6; font-size: 11px; letter-spacing: 1px;">

        <span>–ú–£–ó–ò–ß–ù–ò–ô –ü–õ–ï–Ñ–†</span>

        <i class="fas fa-plus-circle" style="cursor:pointer; font-size: 16px;" onclick="document.getElementById('mu-file').click()"></i>

    </div>

    <input type="file" id="mu-file" style="display:none" accept="audio/*" onchange="uploadMusic(this)">

    

    <div id="music-list"></div>



    <div id="player-controls" class="controls-panel">

        <div id="now-playing" style="font-size: 10px; text-align: center; margin-bottom: 5px; opacity: 0.8; height: 14px; overflow: hidden;">...</div>

        <div id="time-display" style="font-size: 10px; text-align: center; opacity: 0.5; font-family: monospace;">0:00 / 0:00</div>

        <div class="progress-container" onclick="seek(event)"><div id="progress-bar"></div></div>

        <div style="text-align:center;"><i class="fas fa-play" id="play-btn" style="cursor:pointer; font-size: 24px;" onclick="togglePlay()"></i></div>

    </div>

</aside>



<main class="main">

    <div style="display:flex; justify-content:space-between; align-items:center;">

        <h1 style="font-size: 28px; font-weight: 900;">SUPPORT <span style="color:var(--blue)">ONLINE</span></h1>

        <div onclick="toggleDrop()" style="cursor:pointer; display:flex; align-items:center; gap:15px; background: rgba(255,255,255,0.05); padding: 5px 15px; border-radius: 40px; border: 1px solid rgba(255,255,255,0.1);">

            <span id="user-name" style="font-weight: 700;">...</span>

            <img id="user-av" style="width:45px; height:45px; border-radius:50%; object-fit:cover; border: 2px solid #fff;">

        </div>

    </div>

    <div id="staff-list" style="margin-top:40px; display:grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap:20px;"></div>

</main>



<div id="drop-menu" style="position:fixed; top:90px; right:40px; background:#0a1a2a; border:1px solid #fff; border-radius:20px; padding:15px; display:none; z-index:6000; width:180px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">

    <button class="btn" style="font-size:11px;" onclick="document.getElementById('av-file').click()">–ó–ú–Ü–ù–ò–¢–ò –§–û–¢–û</button>

    <button class="btn" style="font-size:11px; background:#22c55e;" onclick="setStatus('working')">üíª –ü–†–ê–¶–Æ–Æ</button>

    <button class="btn" style="font-size:11px; background:#f09819;" onclick="setStatus('resting')">‚òï –í–Ü–î–ü–û–ß–ò–í–ê–Æ</button>

    <button class="btn" style="background:#ef4444; font-size:11px; margin-top:10px;" onclick="logout()">–í–ò–ô–¢–ò</button>

    <input type="file" id="av-file" style="display:none" onchange="uploadAv(this)">

</div>



<div id="m-rep" class="modal"><div class="modal-content"><iframe src="https://forms.gle/yK2GfooTJjEy152i8" style="width:100%; height:100%; border:none;"></iframe><button onclick="closeM('m-rep')" style="position:absolute; top:15px; right:15px; background:rgba(0,0,0,0.5); color:white; border:none; border-radius:50%; width:40px; height:40px; cursor:pointer; font-size:20px;">&times;</button></div></div>

<div id="m-norm" class="modal"><div class="modal-content" style="padding:40px; height:auto; min-height:200px;"><h2 style="color:var(--yellow); margin-top:0;">–ù–û–†–ú–ê –ü–†–ê–¶–Ü</h2><div id="text-norma" style="line-height:1.6;">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div><button onclick="closeM('m-norm')" style="position:absolute; top:15px; right:15px; background:none; color:white; border:none; font-size:30px; cursor:pointer;">&times;</button></div></div>



<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

<script type="module">

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";

    import { getDatabase, ref, set, onValue, get, update, onDisconnect, push, remove } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";



    const cfg = { apiKey: "AIzaSyCK5b9Ls2eWy1FGPjq738wVRWBJ8KhLdPg", authDomain: "support-e0578.firebaseapp.com", projectId: "support-e0578", databaseURL: "https://support-e0578-default-rtdb.firebaseio.com" };

    const app = initializeApp(cfg); const db = getDatabase(app);

    const audio = document.getElementById('player-audio');

    const cur = localStorage.getItem('fart_user');



    // Garland

    const garland = document.getElementById('garland');

    const colors = ['#ff0000', '#00ff00', '#ffff00', '#0000ff', '#ff00ff', '#00ffff'];

    for(let i=0; i<25; i++) {

        const l = document.createElement('div'); l.className = 'light';

        l.style.color = colors[i % colors.length]; l.style.animationDelay = (Math.random()*2)+'s';

        garland.appendChild(l);

    }



    if(!cur) { document.getElementById('auth-screen').style.display='flex'; } 

    else {

        const myOn = ref(db, 'staff/' + cur + '/isOnline'); set(myOn, true); onDisconnect(myOn).set(false);

        onValue(ref(db, 'staff/' + cur), s => { 

            if(!s.exists()) { logout(); return; }

            if(s.val().status !== 'approved') {

                document.getElementById('auth-screen').style.display='flex';

                document.getElementById('log-nick').value = cur;

                document.getElementById('auth-err').innerText = "‚è≥ –û—á—ñ–∫—É–π—Ç–µ —Å—Ö–≤–∞–ª–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º";

            } else {

                document.getElementById('auth-screen').style.display='none';

                document.getElementById('user-name').innerText = cur;

                document.getElementById('user-av').src = s.val().avatar || "https://i.imgur.com/6VBx3io.png";

            }

        });



        window.uploadMusic = (input) => {

            const f = input.files[0]; if(!f || f.size > 15000000) { alert("–§–∞–π–ª –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–∏–π (–º–∞–∫—Å 15MB)"); return; }

            const r = new FileReader(); r.onload = (e) => push(ref(db, 'music/' + cur), { name: f.name, data: e.target.result });

            r.readAsDataURL(f);

        };



        onValue(ref(db, 'music/' + cur), (snap) => {

            const list = document.getElementById('music-list'); list.innerHTML = "";

            const data = snap.val() || {};

            Object.entries(data).forEach(([id, m]) => {

                const div = document.createElement('div'); div.className = 'track-item';

                div.innerHTML = `<span>${m.name}</span><i class="fas fa-trash-alt del-btn" title="–í–∏–¥–∞–ª–∏—Ç–∏"></i>`;

                div.querySelector('span').onclick = () => playTrack(m.data, m.name);

                div.querySelector('.del-btn').onclick = (e) => { e.stopPropagation(); deleteTrack(id); };

                list.appendChild(div);

            });

        });



        window.deleteTrack = (id) => { if(confirm('–í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π —Ç—Ä–µ–∫?')) remove(ref(db, `music/${cur}/${id}`)); };

        window.playTrack = (src, name) => { 

            audio.src = src; audio.play(); 

            document.getElementById('now-playing').innerText = name; 

            document.getElementById('play-btn').className = "fas fa-pause"; 

            document.getElementById('player-controls').style.display = 'block'; 

            setTimeout(()=>document.getElementById('player-controls').style.opacity='1', 50); 

        };



        onValue(ref(db, 'staff'), (snap) => {

            const l = document.getElementById('staff-list'); l.innerHTML = "";

            Object.values(snap.val() || {}).forEach(u => {

                if(u.status === 'approved' && u.isOnline) {

                    const t = u.workStatus === 'working' ? '<br><span class="tag tag-work">üíª –ü–†–ê–¶–Æ–Æ</span>' : '<br><span class="tag tag-rest">‚òï –í–Ü–î–ü–û–ß–ò–í–ê–Æ</span>';

                    l.innerHTML += `<div class="staff-card"><img src="${u.avatar}" style="width:45px; height:45px; border-radius:50%; object-fit:cover; border:2px solid #fff;"><div><b>${u.nickname}</b><span class="online-dot"></span>${t}</div></div>`;

                }

            });

        });

    }



    window.handleAuth = async () => {

        const n = document.getElementById('log-nick').value.trim();

        const p = document.getElementById('log-pass').value.trim();

        if(!n || !p) return;

        const s = await get(ref(db, 'staff/' + n));

        if(s.exists()) {

            if(s.val().password === p) { localStorage.setItem('fart_user', n); location.reload(); }

            else { alert('–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å!'); }

        } else {

            await set(ref(db, 'staff/' + n), { nickname: n, password: p, avatar: "https://i.imgur.com/6VBx3io.png", status: "pending", workStatus: "resting", isOnline: false });

            alert('–ó–∞—è–≤–∫—É –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ! –û—á—ñ–∫—É–π—Ç–µ —Å—Ö–≤–∞–ª–µ–Ω–Ω—è.');

        }

    };



    window.togglePlay = () => { if(audio.paused) { audio.play(); document.getElementById('play-btn').className="fas fa-pause"; } else { audio.pause(); document.getElementById('play-btn').className="fas fa-play"; }};

    audio.ontimeupdate = () => { 

        if(!audio.duration) return;

        document.getElementById('progress-bar').style.width = (audio.currentTime/audio.duration)*100 + "%"; 

        document.getElementById('time-display').innerText = `${fmt(audio.currentTime)} / ${fmt(audio.duration)}`; 

    };

    function fmt(s) { const m=Math.floor(s/60), sec=Math.floor(s%60); return `${m}:${sec<10?'0':''}${sec}`; }

    window.seek = (e) => { const r = e.currentTarget.getBoundingClientRect(); audio.currentTime = ((e.clientX - r.left)/r.width) * audio.duration; };

    window.setStatus = (s) => update(ref(db, 'staff/' + cur), { workStatus: s });

    window.uploadAv = (i) => { const r = new FileReader(); r.onload = () => update(ref(db, 'staff/' + cur), { avatar: r.result }); r.readAsDataURL(i.files[0]); };

    window.logout = () => { if(cur) set(ref(db, 'staff/' + cur + '/isOnline'), false); localStorage.clear(); location.reload(); };

    window.openM = (id) => document.getElementById(id).style.display = 'flex';

    window.closeM = (id) => document.getElementById(id).style.display = 'none';

    window.toggleDrop = () => { const m = document.getElementById('drop-menu'); m.style.display = m.style.display==='none'?'block':'none'; };



    setInterval(() => {

        const s = document.createElement('div'); s.className = 'snowflake'; s.innerHTML = '‚ùÑ';

        s.style.left = Math.random() * 100 + 'vw'; s.style.animationDuration = Math.random() * 3 + 5 + 's';

        document.body.appendChild(s); setTimeout(() => s.remove(), 6000);

    }, 450);

    particlesJS("particles-js", { "particles": { "number": { "value": 25 }, "color": { "value": "#ffffff" }, "line_linked": { "enable": true, "opacity": 0.1 }, "move": { "enable": true, "speed": 0.6 } } });

    onValue(ref(db, 'content/norma'), s => { document.getElementById('text-norma').innerText = s.val() || "–ù–æ—Ä–º–∞ —â–µ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"; });

</script>

</body>

</html> 
